<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="72f03536-6439-4587-af29-cb2a1fec513b" activeEnvironment="Default" name="TalentReview" resourceRoot="" soapui-version="5.1.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="3861fd91-5ee1-4ab1-acd3-d2ca06f7280d" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://10.2.1.183:8080" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.2.1.183:8080</con:endpoint></con:endpoints><con:resource name="Criteria" path="/TRS/web/employee" id="52eaa164-943a-4fe3-b3da-f541642355ca"><con:settings/><con:parameters><con:parameter><con:name>criteria</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>rule</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>id</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>score</con:name><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>level</con:name><con:style>QUERY</con:style></con:parameter></con:parameters><con:method name="Criteria" id="aff992e5-80da-46da-97bd-48b8fff4e727" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/octet-stream</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="GetCriteria" id="4d84834d-9bcb-49d1-855d-07553969f7be" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.2.1.183:8080</con:endpoint><con:request/><con:originalUri>http://10.2.1.183/TRS/web/employee</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>criteria</con:entry><con:entry>rule</con:entry><con:entry>id</con:entry><con:entry/></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5b70cdc4-bf51-4256-a8c0-e6eceffec249" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://10.2.1.183:8080" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.2.1.183:8080</con:endpoint></con:endpoints><con:resource name="EmployeeInfo" path="/TRS/web/employee" id="488d02d0-2d5e-4085-bbb9-0a2e05d869be"><con:settings/><con:parameters><con:parameter><con:name>employee_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>department</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>gdcStartDate</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>lastPromotionDate</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>active</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>bu</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>emid</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>firstName</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>lastDay</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>lastName</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>lineManager</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="EmployeeInfo" id="1cb2bce5-7d89-4d80-a128-09c5a05d0ba3" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/octet-stream</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="GETEmployeeInfo" id="73490c30-5aec-4343-8034-77df622c171c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.2.1.183:8080</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>employee_id</con:entry><con:entry>department</con:entry><con:entry>gdcStartDate</con:entry><con:entry>lastPromotionDate</con:entry><con:entry>active</con:entry><con:entry>bu</con:entry><con:entry>emid</con:entry><con:entry>firstName</con:entry><con:entry>id</con:entry><con:entry>lastDay</con:entry><con:entry>lastName</con:entry><con:entry>lineManager</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="2271de9b-bef0-495d-8563-71988720709f" name="GetCriteria"><con:description>TestSuite generated for REST Service [http://10.2.1.183:8080]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="9309aff6-cca4-408d-9ecd-bf2ef5986e34" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Employee TestCase" searchProperties="true"><con:description>TestCase generated for REST Resource [Employee] located at [/TRS/web/employee]</con:description><con:settings/><con:testStep type="restrequest" name="GetCriteria" id="5310c707-ad88-43ab-9e24-ff3ee074d05e"><con:settings/><con:config service="http://10.2.1.183:8080" resourcePath="/TRS/web/employee" methodName="Criteria" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetCriteria" id="2e78d835-6c40-4ef1-9973-4bda3601adee" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.2.1.183:8080</con:endpoint><con:request/><con:originalUri>http://10.2.1.183/TRS/web/employee</con:originalUri><con:assertion type="GroovyScriptAssertion" id="94d54c48-8bc6-4095-8324-eeedbd39f47d" name="Script Assertion"><con:configuration><scriptText>import groovy.sql.Sql
import java.sql.ResultSet 
import groovy.json.JsonSlurper

def project=messageExchange.modelItem.testStep.testCase.testSuite.project;
def driver=project.getPropertyValue( "jdbc.driver" );
def sqlConnectionURL=project.getPropertyValue( "jdbc.url" );
def userName = project.getPropertyValue( "jdbc.user" );
def password = project.getPropertyValue( "jdbc.password" );
try{
	db = Sql.newInstance(sqlConnectionURL, userName, password, driver);
} catch(Exception e){
	log.info("DB connection failed. Detail message: "+ e);	
}
def slurper = new JsonSlurper();
def responseText = messageExchange.modelItem.testStep.testRequest.response.contentAsString
def responseJson = slurper.parseText(responseText)
def rows = db.rows("select * from criteria");
db.close();
if(rows.size()==responseJson.size()){
	for(def i=0;i&lt;rows.size();i++){
		assert(rows.get(i).id.toString()==responseJson.get(i).id.toString());
		assert(rows.get(i).rule.toString()==responseJson.get(i).rule.toString());	
		assert(rows.get(i).criteria.toString()==responseJson.get(i).criteria.toString());
		assert(rows.get(i).score.toString()==responseJson.get(i).score.toString());
		assert(rows.get(i).level.toString()==responseJson.get(i).level.toString());		
	}	
}</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>criteria</con:entry><con:entry>rule</con:entry><con:entry>id</con:entry><con:entry>score</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="36b4ec6d-df25-4e57-9fcd-a428ff918093" name="GETEmployeeInfo"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="51457dbe-a97f-4139-964b-312fca02a626" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="EmployeeInfo" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GETEmployeeInfo" id="3bdcfd4a-5008-4b81-9a05-8faaa32bd1b3"><con:settings/><con:config service="http://10.2.1.183:8080" resourcePath="/TRS/web/employee" methodName="EmployeeInfo" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETEmployeeInfo" id="73490c30-5aec-4343-8034-77df622c171c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.2.1.183:8080</con:endpoint><con:request/><con:originalUri>http://10.2.1.183/TRS/web/employee</con:originalUri><con:assertion type="GroovyScriptAssertion" id="4694d070-a1f9-49f6-9fe5-4e6b14a13f09" name="Script Assertion"><con:configuration><scriptText>import groovy.sql.Sql
import java.sql.ResultSet 
import groovy.json.JsonSlurper

def project=messageExchange.modelItem.testStep.testCase.testSuite.project;
def driver=project.getPropertyValue( "jdbc.driver" );
def sqlConnectionURL=project.getPropertyValue( "jdbc.url" );
def userName = project.getPropertyValue( "jdbc.user" );
def password = project.getPropertyValue( "jdbc.password" );
try{
	db = Sql.newInstance(sqlConnectionURL, userName, password, driver);
} catch(Exception e){
	log.info("DB connection failed. Detail message: "+ e);	
}
def slurper = new JsonSlurper();
def responseText = messageExchange.modelItem.testStep.testRequest.response.contentAsString
def responseJson = slurper.parseText(responseText)
def rows = db.rows("select * from employee_info");
db.close();
if(rows.size()==responseJson.size()){
	assert(responseJson.size()>0);
	for(def i=0;i&lt;rows.size();i++){
		assert(rows.get(i).employee_id.toString()==responseJson.get(i).employee_id.toString());
		assert(rows.get(i).department.toString()==responseJson.get(i).department.toString());	
		assert(rows.get(i).gdc_start_date.toString()==responseJson.get(i).gdcStartDate.toString());
		assert(rows.get(i).last_promotion_date.toString()==responseJson.get(i).lastPromotionDate.toString());
//		assert(rows.get(i).level.toString()==responseJson.get(i).level.toString());	
//		assert(rows.get(i).level.toString()==responseJson.get(i).level.toString());
//		assert(rows.get(i).level.toString()==responseJson.get(i).level.toString());	
	}	
}</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>employee_id</con:entry><con:entry>department</con:entry><con:entry>gdcStartDate</con:entry><con:entry>lastPromotionDate</con:entry><con:entry>active</con:entry><con:entry>bu</con:entry><con:entry>emid</con:entry><con:entry>firstName</con:entry><con:entry>id</con:entry><con:entry>lastDay</con:entry><con:entry>lastName</con:entry><con:entry>lineManager</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>jdbc.url</con:name><con:value>jdbc:postgresql://10.2.1.183:5433/TRS</con:value></con:property><con:property><con:name>jdbc.driver</con:name><con:value>org.postgresql.Driver</con:value></con:property><con:property><con:name>jdbc.user</con:name><con:value>hr</con:value></con:property><con:property><con:name>jdbc.password</con:name><con:value>hr123456</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:sensitiveInformation/></con:soapui-project>